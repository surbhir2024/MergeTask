<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/public/student_view.css">
    <title>Student_Data</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<style>
    #customers {
        font-family: Arial, Helvetica, sans-serif;
        border-collapse: collapse;
        width: 100%;
    }

    #customers td,
    #customers th {
        border: 1px solid #ddd;
        padding: 8px;
    }

    #customers tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    #customers tr:hover {
        background-color: #ddd;
    }

    #customers th {
        padding-top: 12px;
        padding-bottom: 12px;
        text-align: left;
        background-color: #04AA6D;
        color: white;
    }

    .container {
        height: 70px;
        background-color: #04AA6D;
    }

    .row {
        display: flex;
        flex-direction: row;
        justify-content: center;
        text-align: center;
    }

    .col {
        width: 25%;
    }

    .col2 {
        width: 50%;
    }

    .col3 {
        width: 25%;
    }

    a {
        margin: 10px;
        text-decoration: none;
    }

    .disable {
        pointer-events: none;
        cursor: none;
        opacity: 0.5;
    }
    .disabledes{
        pointer-events: none;
        cursor: none;
        opacity: 0.5;
    }

    .heading {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
    }

    .btn {
        display: flex;
        flex-direction: column;
        margin: 0;
    }
    .btn a{
        margin: 0;
        padding: 0;
    }
  
</style>

<body>
    <center>
        <h1>Surbhi Rank</h1>
    </center>
    <% monthdes=month%>
        <% let selecteddecember="" %>
            <%let selectedjanuary="" %>
                <% let selectedfebruary="" %>

                    <% if(monthdes=="12-2023" ){%>
                        <%selecteddecember="selected" %>
                            <%} else if(monthdes=="01-2024" ){%>
                                <%selectedjanuary="selected" %>
                                    <%}else if(monthdes=="02-2024" ){%>
                                        <%selectedfebruary="selected" %>
                                            <%} %>

                                                <form>
                                                    <select name="month" id="month" onchange="monthdisplay(this)" style="padding: 12px; background-color: aliceblue;">
                                                        <option value="12-2023" <%=selecteddecember%>>December</option>
                                                        <option value="01-2024" <%=selectedjanuary %>>January</option>
                                                        <option value="02-2024" <%=selectedfebruary%>>February</option>
                                                    </select>
                                                </form>
                                                <!-- <a href="/datadisplay?month=December">December</a>
   <a href="/datadisplay?month=January">January</a>
   <a href="/datadisplay?month=February">February</a>  -->
    <table id="customers">
    <caption style="font-size: large;">Student_Data OF <%= month%> Month </caption>
         <tr>
            <th>
                <div class="heading">
                    <div>StudentId </div>
                        <%let disabledid = ""%>
                        <%let disablediddec = ""%>
                        <%if(orderbytype == "ASC" && fieldname == "studentid"){%>
                            <%disabledid = "disable"%>    
                        <%}else if(orderbytype == "DESC" && fieldname == "studentid"){%>
                            <%disablediddec = "disable"%>  
                        <%}%>
                        <%let disabledname = ""%>
                        <%let disablednamedec = ""%>
                        <%if(orderbytype == "ASC" && fieldname == "FirstName"){%>
                            <%disabledname = "disable"%>    
                        <%}else if(orderbytype == "DESC" && fieldname == "FirstName"){%>
                            <%disablednamedec = "disable"%>  
                        <%}
                        %>
                        <%let disabledtotal = ""%>
                        <%let disabledtotaldec = ""%>
                        <%if(orderbytype == "ASC" && fieldname == "permonth"){%>
                            <%disabledtotal = "disable"%>    
                        <%}else if(orderbytype == "DESC" && fieldname == "permonth"){%>
                            <%disabledtotaldec = "disable"%>  
                        <%}%>
                        <%let disabledper = ""%>
                        <%let disabledperdec = ""%>
                        <%if(orderbytype == "ASC" && fieldname == "per"){%>
                            <%disabledper = "disable"%>    
                        <%}else if(orderbytype == "DESC" && fieldname == "per"){%>
                            <%disabledperdec = "disable"%>  
                        <%}%>
                        <div class="btn">
                            <a href="/datadisplay/?page=1&fieldname=studentid&orderbytype=ASC" class="<%=disabledid%>"><i class="fa-solid fa-caret-up"></i></a>
                            <a href="/datadisplay/?page=1&fieldname=studentid&orderbytype=DESC" class="<%=disablediddec%>"><i class="fa-solid fa-caret-down"></i></a>
                        </div>
                    
                </div>
            </th>
                                                        
            <th>
                <div class="heading">
                    <div>Student_Name</div>
                    
                        <div class="btn">
                            <a href="/datadisplay/?page=1&fieldname=FirstName&orderbytype=ASC" class="<%=disabledname%>"><i class="fa-solid fa-caret-up"></i></a>
                            <a href="/datadisplay/?page=1&fieldname=FirstName&orderbytype=DESC" class="<%=disablednamedec%>"><i class="fa-solid fa-caret-down"></i></a>
                        </div>
                    </a>
                </div>
            </th>

                
            <th>
                <div class="heading">
                    <div>TotalAttendance </div>
                   
                        <div class="btn">
                            <a href="/datadisplay/?page=1&fieldname=permonth&orderbytype=ASC" class="<%=disabledtotal%>"> <i class="fa-solid fa-caret-up"></i></a>
                            <a href="/datadisplay/?page=1&fieldname=permonth&orderbytype=DESC"  class="<%=disabledtotaldec%>"> <i class="fa-solid fa-caret-down"></i> </a>
                        </div>
                   
                </div>
            </th>
            <th>
                <div class="heading">
                    <div>Attandance inPercentage</div>
                    
                        <div class="btn">
                            <a href="/datadisplay/?page=1&fieldname=per&orderbytype=ASC" class="<%=disabledper%>"><i class="fa-solid fa-caret-up"></i></a>
                            <a href="/datadisplay/?page=1&fieldname=per&orderbytype=DESC"  class="<%=disabledperdec%>"><i class="fa-solid fa-caret-down"></i></a>
                        </div>
                
                </div>
            </th>                                        
                                                        <!-- <th>
                                                            <a href="/datadisplay/?page=1&fieldname=FirstName">Student_Name</a>
                                                        </th> 
                                                         <th><a href="/datadisplay/?page=1&fieldname=permonth">totalAttendance
                                                                of Month</a></th>
                           Percentage</a></th> -->
                        </tr>
                       
                            <% for( let index=0; index < data?.length; index++ ) { %>
                                <tr>
                                    <td>
                                        <%= data[index].studentid %>
                                    </td>
                                    <td>
                                        <%= data[index].FirstName %>
                                    </td>
                                    <td>
                                        <%= data[index].permonth %>
                                    </td>
                                    <td>
                                        <%= data[index].per%>%
                                    </td>
                                </tr>
    
                            <% } %>
                     
                           

                       



                    </table>                                    
                                                 
        <div class="container">
            <div class="row">
             <a href="/datadisplay?month=<%=month%>&page=1&fieldname=<%=fieldname%>&orderbytype=<%=orderbytype%>"> << </a>
                 <% if(crr_page==1){ %>
                     <a href="/datadisplay?month=<%=month%>&page=<%= crr_page - 1%>&fieldname=<%=fieldname%>&orderbytype=<%=orderbytype%>" class="disable"><</a>
        <% } else { %>
             <a href="/datadisplay?month=<%=month%>&page=<%= crr_page - 1%>&fieldname=<%=fieldname%>&orderbytype=<%=orderbytype%>"> <</a>
    <% } %>
        <a href="/datadisplay?month=<%=month%>&page=<%= crr_page%>&fieldname=<%=fieldname%>&orderbytype=<%=orderbytype%>"> <%= crr_page%></a>
         <% if(crr_page==last_page){ %>
        <a href="/datadisplay?month=<%=month%>&page=<%= crr_page + 1%>&fieldname=<%=fieldname%>&orderbytype=<%=orderbytype%>" class="disable">></a> <% } else { %>
         <a href="/datadisplay?month=<%=month%>&page=<%= crr_page + 1%>&fieldname=<%=fieldname%>&orderbytype=<%=orderbytype%>">></a>
     <% } %>

    <a href="/datadisplay?month=<%=month%>&page=<%= last_page %>&fieldname=<%=fieldname%>&orderbytype=<%=orderbytype%>">>></a>
    </div>
     </div>

</body>
<script>
    function monthdisplay(month) {
        window.location = "/datadisplay?page=1&month=" + month.value;
    }
</script>

</html>